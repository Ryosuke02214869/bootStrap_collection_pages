# Grid System GUIレイアウトビルダー - UI/UX設計書

## 全体レイアウト構成

### 基本構造
```
┌─────────────────────────────────────────────────┐
│ ページヘッダー（タイトル、説明）                  │
├─────────────────────────────────────────────────┤
│ ▼ 設定セクション（折りたたみ可能）                │
│ ┌─────────────────────────────────────────────┐ │
│ │ [Row管理] [Column管理] [プレビュー設定]      │ │
│ │                                             │ │
│ │ （設定UIエリア）                             │ │
│ └─────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────┤
│ プレビューセクション                              │
│ ┌─────────────────────────────────────────────┐ │
│ │ [ブレークポイント切り替え] [コード表示]      │ │
│ │                                             │ │
│ │ （グリッドプレビューエリア）                 │ │
│ │                                             │ │
│ └─────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────┘
```

---

## 1. 設定セクション（上部）

### 1.1 折りたたみ機能
- **デフォルト状態**: 展開（初回訪問時）
- **折りたたみボタン**: セクション右上に配置
  - アイコン: `▼`（展開時）/ `▶`（折りたたみ時）
  - テキスト: "設定を閉じる" / "設定を開く"
- **状態保存**: LocalStorageに保存（次回訪問時に反映）
- **アニメーション**: スムーズなスライドアニメーション

### 1.2 設定UI構成案A（タブ形式）

```
┌─────────────────────────────────────────────────────┐
│ 設定セクション                      [設定を閉じる ▼] │
├─────────────────────────────────────────────────────┤
│ [Row管理] [Column管理] [詳細設定]                    │
│ ━━━━━━━                                             │
│ ┌─────────────────────────────────────────────────┐ │
│ │ Row一覧                                          │ │
│ │ ┌───────────────────────────┐                   │ │
│ │ │ ▤ Row 1        [設定] [×] │                   │ │
│ │ │   └ Col 1 (col-6)         │                   │ │
│ │ │   └ Col 2 (col-6)         │                   │ │
│ │ └───────────────────────────┘                   │ │
│ │ ┌───────────────────────────┐                   │ │
│ │ │ ▤ Row 2        [設定] [×] │                   │ │
│ │ │   └ Col 1 (col-12)        │                   │ │
│ │ └───────────────────────────┘                   │ │
│ │                                                  │ │
│ │ [+ Row を追加]                                   │ │
│ └─────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────┘
```

#### タブの内容

**🔹 Tab 1: Row管理**
- Row一覧（アコーディオン形式）
  - 各Rowをクリックで展開/折りたたみ
  - Row内のColumn一覧を表示
- 各Rowの操作
  - [設定]ボタン → Row設定モーダルを開く
  - [×]ボタン → Rowを削除
  - ドラッグハンドル（▤） → Row順序の並び替え
- [+ Rowを追加]ボタン

**🔹 Tab 2: Column管理**
- 現在選択中のRow内のColumn編集
- Column選択用ドロップダウン
- Column設定フォーム
  - カラム幅設定（各ブレークポイント別）
  - Offset設定
  - Order設定
- [+ Columnを追加]ボタン
- [Columnを削除]ボタン

**🔹 Tab 3: 詳細設定**
- プリセット選択
- 一括リセット
- インポート/エクスポート（JSON形式）
- グリッド設定（全体）

---

### 1.3 設定UI構成案B（サイドバイサイド形式）

```
┌─────────────────────────────────────────────────────┐
│ 設定セクション                      [設定を閉じる ▼] │
├──────────────────────┬──────────────────────────────┤
│ Row一覧（左）         │ 選択中のRow/Column設定（右）  │
│                      │                              │
│ ▤ Row 1     [設定][×]│ 📋 Row 1 の設定              │
│   └Col1 (col-6)      │                              │
│   └Col2 (col-6)      │ Gutter:                      │
│                      │ [g-3  ▼]                     │
│ ▤ Row 2     [設定][×]│                              │
│   └Col1 (col-12)     │ Vertical Align:              │
│                      │ ○ Start ● Center ○ End      │
│ [+ Row追加]          │                              │
│                      │ Justify Content:             │
│                      │ [center ▼]                   │
│                      │                              │
│                      │ [適用]                       │
└──────────────────────┴──────────────────────────────┘
```

---

### 1.4 設定UI構成案C（コンパクト形式）

```
┌─────────────────────────────────────────────────────┐
│ 設定セクション                      [設定を閉じる ▼] │
├─────────────────────────────────────────────────────┤
│ [プリセット: カスタム ▼] [リセット] [コードをコピー] │
├─────────────────────────────────────────────────────┤
│ Rows:                                                │
│ ┌─ Row 1 ──────────────────────────────────────────┐│
│ │ Cols: [col-6] [col-6]           [設定...] [削除] ││
│ └──────────────────────────────────────────────────┘│
│ ┌─ Row 2 ──────────────────────────────────────────┐│
│ │ Cols: [col-12]                  [設定...] [削除] ││
│ └──────────────────────────────────────────────────┘│
│ [+ Row追加]                                          │
└─────────────────────────────────────────────────────┘
```

---

## 2. プレビューセクション（下部）

### 2.1 基本構造

```
┌─────────────────────────────────────────────────────┐
│ プレビュー                                           │
├─────────────────────────────────────────────────────┤
│ [📱Mobile] [📱Tablet] [💻Desktop] [🖥️Wide]          │
│ ☑ グリッド線を表示  ☑ クラス名を表示                 │
│                                        [コード表示 ▼]│
├─────────────────────────────────────────────────────┤
│ ┌───────────────────────────────────────────────┐   │
│ │ Container                                     │   │
│ │ ┌─────────────────┬─────────────────┐        │   │
│ │ │ col-6           │ col-6           │  Row 1 │   │
│ │ │                 │                 │        │   │
│ │ └─────────────────┴─────────────────┘        │   │
│ │ ┌─────────────────────────────────────┐      │   │
│ │ │ col-12                              │ Row 2│   │
│ │ │                                     │      │   │
│ │ └─────────────────────────────────────┘      │   │
│ └───────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────┘
```

### 2.2 ブレークポイント切り替え

**ボタン形式**:
- 📱 Mobile (< 576px)
- 📱 Tablet (≥ 576px, sm)
- 💻 Desktop (≥ 992px, lg)
- 🖥️ Wide (≥ 1400px, xxl)

**動作**:
- ボタンクリックでプレビュー幅が変化
- アクティブなボタンは色が変わる
- スムーズなアニメーション

**追加オプション（検討中）**:
- スライダーで任意の幅に調整可能
- 具体的なpx値を表示

### 2.3 プレビュー表示オプション

**グリッド線表示**:
- チェックボックスでON/OFF
- グリッドの12カラムを薄い線で表示
- ガイドとして役立つ

**クラス名表示**:
- チェックボックスでON/OFF
- 各Column上に適用中のクラス名を表示
  - 例: `col-md-6 offset-md-3`
- 小さなバッジ形式で表示

**Column内容**:
- デフォルト: 背景色のみ（薄いグレー）
- オプション: サンプルテキスト表示
  - 「Column 1」「Column 2」等
- オプション: カスタムコンテンツ入力（将来機能）

### 2.4 コード表示エリア

**表示方法（案A: 折りたたみ式）**:
```
┌─────────────────────────────────────────────────┐
│ [コード表示 ▼]                                  │
│ ┌─────────────────────────────────────────────┐ │
│ │ [HTML] [Vue]              [📋 コピー]       │ │
│ │ ───────────────────────────────────────────│ │
│ │ <div class="container">                    │ │
│ │   <div class="row">                        │ │
│ │     <div class="col-6">...</div>           │ │
│ │     <div class="col-6">...</div>           │ │
│ │   </div>                                   │ │
│ │ </div>                                     │ │
│ └─────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────┘
```

**表示方法（案B: モーダル式）**:
- [コード表示]ボタンをクリック
- モーダルウィンドウでコードを表示
- より大きな表示スペース

**機能**:
- シンタックスハイライト
- [HTML] / [Vue]タブ切り替え
- [📋 コピー]ボタン
- コピー成功時のフィードバック表示

---

## 3. Row/Column設定モーダル

### 3.1 Row設定モーダル

```
┌─────────────────────────────────────┐
│ Row 1 の設定              [× 閉じる]│
├─────────────────────────────────────┤
│                                     │
│ Gutter（余白）:                      │
│ ○ なし(g-0)  ○ 小(g-2)  ● 中(g-3)  │
│ ○ 大(g-4)    ○ 特大(g-5)            │
│                                     │
│ 垂直配置:                            │
│ ○ 上揃え ● 中央揃え ○ 下揃え        │
│                                     │
│ 水平配置:                            │
│ [中央揃え (center) ▼]               │
│                                     │
│ Columns:                            │
│ ┌─────────────────────────────────┐ │
│ │ ⋮ Col 1: col-6    [編集] [削除]│ │
│ │ ⋮ Col 2: col-6    [編集] [削除]│ │
│ └─────────────────────────────────┘ │
│ [+ Column追加]                      │
│                                     │
│         [キャンセル]  [適用]         │
└─────────────────────────────────────┘
```

### 3.2 Column設定モーダル

```
┌─────────────────────────────────────┐
│ Column 1 の設定           [× 閉じる]│
├─────────────────────────────────────┤
│                                     │
│ 📱 カラム幅設定                      │
│ ┌─────────────────────────────────┐ │
│ │ デフォルト(xs): [6  ▼]  /12    │ │
│ │ Small(sm):      [6  ▼]  /12    │ │
│ │ Medium(md):     [6  ▼]  /12    │ │
│ │ Large(lg):      [8  ▼]  /12    │ │
│ │ XL(xl):         [8  ▼]  /12    │ │
│ │ XXL(xxl):       [8  ▼]  /12    │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 📐 Offset（左余白）:                 │
│ ┌─────────────────────────────────┐ │
│ │ デフォルト(xs): [なし ▼]       │ │
│ │ Medium(md):     [なし ▼]       │ │
│ │ Large(lg):      [2   ▼]        │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 🔢 Order（表示順）:                  │
│ ┌─────────────────────────────────┐ │
│ │ [デフォルト ▼]                  │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 💡 プレビュー:                       │
│ ┌─────────────────────────────────┐ │
│ │ col-6 col-lg-8 offset-lg-2     │ │
│ └─────────────────────────────────┘ │
│                                     │
│         [キャンセル]  [適用]         │
└─────────────────────────────────────┘
```

---

## 4. プリセット機能

### 4.1 プリセット一覧

1. **2カラムレイアウト（50:50）**
   - Row 1: col-6 + col-6

2. **2カラムレイアウト（66:33）**
   - Row 1: col-8 + col-4

3. **3カラムレイアウト（均等）**
   - Row 1: col-4 + col-4 + col-4

4. **サイドバーレイアウト（左）**
   - Row 1: col-md-3 + col-md-9

5. **サイドバーレイアウト（右）**
   - Row 1: col-md-9 + col-md-3

6. **ヘッダー・コンテンツ・フッター**
   - Row 1: col-12（ヘッダー）
   - Row 2: col-12（コンテンツ）
   - Row 3: col-12（フッター）

7. **カードグリッド（4列）**
   - Row 1: col-sm-6 col-lg-3 × 4

8. **レスポンシブ3→2→1カラム**
   - Row 1: col-12 col-md-6 col-lg-4 × 3

### 4.2 プリセット選択UI

```
プリセット: [カスタム ▼]
            ├ カスタム
            ├ 2カラム（50:50）
            ├ 2カラム（66:33）
            ├ 3カラム（均等）
            ├ サイドバー（左）
            ├ サイドバー（右）
            ├ ヘッダー・コンテンツ・フッター
            ├ カードグリッド（4列）
            └ レスポンシブ3→2→1
```

---

## 5. 検討が必要な詳細項目

### 設定UIの形式
**質問1**: 設定セクションのUI構成は以下のどれが良いですか？
- [ ] **案A: タブ形式** - Row管理、Column管理、詳細設定の3タブ
- [ ] **案B: サイドバイサイド形式** - 左にRow一覧、右に設定
- [ ] **案C: コンパクト形式** - 最小限の情報とモーダルで詳細設定
- [ ] その他（具体的に:                    ）

### Column幅設定の入力方法
**質問2**: カラム幅（col-1～col-12）の設定UIはどの形式が良いですか？
- [ ] **ドロップダウン**: [6 ▼] /12
- [ ] **スライダー**: ━━━●━━━━ 6/12
- [ ] **ボタングループ**: [1][2][3][4][5][6●][7][8][9][10][11][12]
- [ ] **数値入力**: [6] /12
- [ ] その他（具体的に:                    ）

### コード表示の方法
**質問3**: 生成されたHTMLコードの表示方法は？
- [ ] **案A: 折りたたみ式** - プレビュー下部に折りたたみ可能な領域
- [ ] **案B: モーダル式** - ボタンクリックでモーダル表示
- [ ] **案C: 常時表示** - プレビューと並べて常に表示
- [ ] その他（具体的に:                    ）

### グリッド線表示
**質問4**: グリッド線（12カラムのガイド）は必要ですか？
- [ ] **必須** - 常に表示、ON/OFF切り替え可能
- [ ] **オプション** - デフォルトOFF、必要に応じてON
- [ ] **不要** - 実装しない
- [ ] その他（具体的に:                    ）

### ドラッグ&ドロップ
**質問5**: Row/Columnの並び替えにドラッグ&ドロップは必要ですか？
- [ ] **必須** - MVP（最初のバージョン）から実装
- [ ] **後で追加** - まずはボタン式で実装、後からドラッグ対応
- [ ] **不要** - ボタン（上へ/下へ）で十分
- [ ] その他（具体的に:                    ）

---

## 6. 決定事項 ✅

以下の項目について決定されました:

### 6.1 設定UIの形式
**決定**: **タブ形式（案A）**
- Row管理、Column管理、詳細設定の3タブ構成
- 各タブで関連する設定をグループ化

### 6.2 Column幅設定の入力方法
**決定**: **ドロップダウン形式**
- Bootstrapの決められたクラス（col-1～col-12、col-auto等）を選択
- 各ブレークポイントごとにドロップダウンで設定
- 例: `[6 ▼] /12` → col-6を選択

### 6.3 コード表示の方法
**決定**: **折りたたみ式（案A）**
- プレビュー下部に折りたたみ可能な領域
- [コード表示 ▼]ボタンで展開/折りたたみ
- HTMLとVueのタブ切り替え
- コピーボタン付き

### 6.4 グリッド線表示
**決定**: **オプション機能**
- デフォルトはOFF
- チェックボックスでON/OFF切り替え可能
- ON時は12カラムのガイド線を表示

### 6.5 ドラッグ&ドロップ
**決定**: **後で追加（MVPには含めない）**
- 初期実装では上へ/下へボタンで並び替え
- ドラッグ&ドロップは将来の追加要件として検討

---

## 7. MVP（最小実装版）仕様 🎯

### 7.1 実装する機能

#### 設定セクション（タブ形式）
**Tab 1: Row管理**
- ✅ Row一覧表示（アコーディオン形式）
- ✅ Row追加ボタン
- ✅ Row削除ボタン
- ✅ Row設定ボタン → モーダル表示
- ✅ Row内のColumn一覧表示
- ✅ Row順序変更ボタン（上へ/下へ）

**Tab 2: Column管理**
- ✅ 編集対象Row選択ドロップダウン
- ✅ 編集対象Column選択ドロップダウン
- ✅ Column追加ボタン
- ✅ Column削除ボタン
- ✅ Column設定エリア:
  - カラム幅設定（xs, sm, md, lg, xl, xxl）各ドロップダウン
  - Offset設定（主要ブレークポイントのみ）ドロップダウン
  - Order設定 ドロップダウン
- ✅ 適用ボタン

**Tab 3: 詳細設定**
- ✅ プリセット選択ドロップダウン
- ✅ リセットボタン
- ✅ グリッド全体設定（将来拡張用）

#### Row設定モーダル
- ✅ Gutter（余白）設定: ラジオボタン（g-0～g-5）
- ✅ 垂直配置: ラジオボタン（start/center/end）
- ✅ 水平配置: ドロップダウン（start/center/end/around/between/evenly）
- ✅ Column一覧表示
- ✅ Columnの編集・削除ボタン
- ✅ Column追加ボタン
- ✅ 適用/キャンセルボタン

#### Column設定モーダル
- ✅ カラム幅設定: 各ブレークポイントごとのドロップダウン
  - デフォルト(xs): col-1～col-12, col-auto
  - sm, md, lg, xl, xxl: 同上
- ✅ Offset設定: ドロップダウン（offset-0～offset-11）
  - デフォルト, md, lgのみ実装
- ✅ Order設定: ドロップダウン（first/last/0-5）
- ✅ プレビュー表示: 適用されるクラス名を表示
- ✅ 適用/キャンセルボタン

#### プレビューセクション
- ✅ ブレークポイント切り替えボタン
  - 📱 Mobile (< 576px)
  - 📱 Tablet (≥ 576px)
  - 💻 Desktop (≥ 992px)
  - 🖥️ Wide (≥ 1400px)
- ✅ グリッド線表示チェックボックス（オプション、デフォルトOFF）
- ✅ クラス名表示チェックボックス
- ✅ リアルタイムプレビュー表示
  - Container内にRowとColumnを表示
  - 各Columnに背景色とラベル表示

#### コード表示エリア（折りたたみ式）
- ✅ [コード表示 ▼]ボタン
- ✅ 折りたたみ可能なコード表示エリア
- ✅ [HTML] / [Vue]タブ切り替え
- ✅ シンタックスハイライト
- ✅ [📋 コピー]ボタン
- ✅ コピー成功時のフィードバック表示

#### プリセット機能
- ✅ 8種類のプリセット実装:
  1. 2カラム（50:50）
  2. 2カラム（66:33）
  3. 3カラム（均等）
  4. サイドバー（左）
  5. サイドバー（右）
  6. ヘッダー・コンテンツ・フッター
  7. カードグリッド（4列）
  8. レスポンシブ3→2→1

#### その他の基本機能
- ✅ 設定セクションの折りたたみ/展開
- ✅ LocalStorageへの状態保存（折りたたみ状態）
- ✅ スムーズなアニメーション

### 7.2 実装しない機能（将来対応）

- ❌ ドラッグ&ドロップでの並び替え（上へ/下へボタンで代替）
- ❌ カスタムコンテンツの入力（固定のダミーコンテンツのみ）
- ❌ 設定のインポート/エクスポート
- ❌ 詳細なレスポンシブプレビュー（スライダーでの任意幅調整）
- ❌ Vue Component形式でのコード生成（HTMLのみ）
- ❌ Column内のネストされたRow

### 7.3 技術スタック（仕様確定後に詳細決定）

- **コードハイライト**: 候補 - Prism.js / highlight.js / Shiki
- **状態管理**: Composition API (reactive/ref)
- **アニメーション**: Vue Transition / CSS Transition
- **UI**: Bootstrap 5の標準コンポーネント

---

## 8. 実装の優先順位

### Phase 1: コア機能（Week 1）
1. 基本的なUI構造（設定セクション + プレビューセクション）
2. Row追加/削除機能
3. Column追加/削除機能
4. 基本的なカラム幅設定（デフォルトのみ）
5. リアルタイムプレビュー

### Phase 2: レスポンシブ対応（Week 2）
6. ブレークポイント別カラム幅設定
7. ブレークポイント切り替え機能
8. レスポンシブプレビュー

### Phase 3: 詳細設定（Week 3）
9. Row設定モーダル（Gutter, Alignment）
10. Column設定モーダル（Offset, Order）
11. タブ切り替え機能

### Phase 4: コード生成とプリセット（Week 4）
12. HTMLコード生成機能
13. コピー機能
14. プリセット実装
15. グリッド線表示機能

### Phase 5: 仕上げ（Week 5）
16. クラス名表示機能
17. LocalStorage対応
18. アニメーションの調整
19. エラーハンドリング
20. ドキュメント整備

---

## 9. 次のステップ

### 9.1 技術選定
以下の項目について決定が必要:
- [ ] コードハイライトライブラリの選定
- [ ] 具体的なコンポーネント構成の設計
- [ ] 状態管理の詳細設計（データ構造）

### 9.2 データ構造設計
Grid Builderの状態を表すデータ構造の設計:
```javascript
// 例
{
  rows: [
    {
      id: 1,
      gutter: 'g-3',
      alignItems: 'center',
      justifyContent: 'start',
      columns: [
        {
          id: 1,
          width: { xs: 6, md: 8, lg: 4 },
          offset: { md: 0, lg: 2 },
          order: { xs: 0 }
        }
      ]
    }
  ]
}
```

### 9.3 UI詳細設計
各コンポーネントの詳細な仕様:
- フォームバリデーション
- エラーメッセージ
- ツールチップの内容
- アクセシビリティ対応

---

## 補足: レスポンシブ対応

設定セクション自体もレスポンシブに対応:
- **デスクトップ**: 上記のレイアウト
- **タブレット**: 設定UIをやや縮小
- **モバイル**: 設定はモーダル化、プレビューを優先表示

この点についても必要に応じて詳細を詰めます。
